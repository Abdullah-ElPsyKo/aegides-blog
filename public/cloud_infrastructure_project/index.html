<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <title>Blog</title>
</head>

<body>
    <div class="container">
        <nav class="navbar">
  <div class="logo">
    <a href="/">AE Blog</a>
  </div>
  <div class="links">
    <a href="/">Homepage</a>
    <a href="/categories">Categories</a>
  </div>
</nav>

        
<div class="single">
  <div class="singleHead">
    <div class="singleHeadTexts">
      <h1 class="singleHeadTitle">Cloud Infrastructure Project â€“ VMware SDDC, vMotion, HA, FT, &amp; MDM</h1>
      <p class="singleHeadDesc">A detailed showcase of a virtualized cloud infrastructure using VMware technologies, including vMotion, High Availability (HA), Fault Tolerance (FT), and Mobile Device Management (MDM).</p>
      <div class="singleHeadDetail">
        
          <img src="/images/AE.svg" loading="lazy" alt="Author Avatar" class="singleAvatar">
        
        <span>
          
            <a href="https://blog.aegides.be/authors/abdulla-bagishev/">Abdulla Bagishev</a>
          
        </span>
        
          <a href="https://blog.aegides.be/categories/cloud-computing/" class="singleCategory">Cloud Computing</a>
        
          <a href="https://blog.aegides.be/categories/virtualization/" class="singleCategory">Virtualization</a>
        
          <a href="https://blog.aegides.be/categories/networking/" class="singleCategory">Networking</a>
        
          <a href="https://blog.aegides.be/categories/system-administration/" class="singleCategory">System Administration</a>
        
      </div>
      <time>Jan 14, 2025</time>
    </div>
    
  </div>
  <div class="singleBottom">
    <div class="singleContent"><h1 id="cloud-infrastructure-project">Cloud Infrastructure Project</h1>
<p><strong>Author</strong>: Abdullah Bagishev<br>
<strong>Year</strong>: 2024 - 2025
<strong>Subject: VMware SDDC, vMotion, HA, FT, &amp; MDM</strong></p>
<hr>
<h2 id="overview">Overview</h2>
<p>This project focuses on deploying a <strong>highly available virtualized cloud environment</strong> using <strong>VMware SDDC technologies</strong>. The setup ensures:<br>
âœ… <strong>Live VM Migration</strong> (vMotion)<br>
âœ… <strong>High Availability (HA) &amp; Continuous Availability (FT)</strong><br>
âœ… <strong>Centralized Storage with TrueNAS (iSCSI &amp; Multipathing)</strong><br>
âœ… <strong>Automated Resource Management (DRS)</strong><br>
âœ… <strong>SSO &amp; MDM (Microsoft Intune &amp; Azure AD)</strong></p>
<hr>
<h2 id="architecture--components"><strong>Architecture &amp; Components</strong></h2>
<h3 id="hypervisor--compute"><strong>Hypervisor &amp; Compute</strong></h3>
<ul>
<li><strong>VMware ESXi</strong> (2 Hosts)</li>
<li><strong>vCenter Server (VCSA)</strong></li>
<li><strong>VMware Distributed Resource Scheduler (DRS)</strong></li>
<li><strong>VMware High Availability (HA)</strong></li>
<li><strong>VMware Fault Tolerance (FT)</strong></li>
</ul>
<h3 id="storage--networking"><strong>Storage &amp; Networking</strong></h3>
<ul>
<li><strong>TrueNAS</strong> â€“ iSCSI Shared Storage for vMotion &amp; HA</li>
<li><strong>Multipathing for iSCSI</strong> â€“ Redundancy &amp; Performance</li>
<li><strong>VMware Distributed Switch</strong> â€“ Ensures smooth migration</li>
<li><strong>IP Address Plan</strong></li>
</ul>
<h3 id="security--authentication"><strong>Security &amp; Authentication</strong></h3>
<ul>
<li><strong>SSO with Active Directory (On-Premises)</strong></li>
<li><strong>Azure AD &amp; Microsoft Intune (MDM for Cloud SSO)</strong></li>
<li><strong>Security Groups &amp; RBAC for VM Creators</strong></li>
</ul>
<hr>
<h2 id="key-features--configurations"><strong>Key Features &amp; Configurations</strong></h2>
<h3 id="1-live-migration-with-vmotion"><strong>1. Live Migration with vMotion</strong></h3>
<ul>
<li><strong>Tech Used:</strong> VMware vMotion + Shared iSCSI Storage</li>
<li><strong>Purpose:</strong> Migrate VMs <strong>without downtime</strong> during maintenance.</li>
<li><strong>Setup:</strong>
<ul>
<li>Enabled vMotion on both ESXi hosts.</li>
<li>Connected ESXi hosts to <strong>TrueNAS via iSCSI</strong> for shared storage.</li>
<li>Used <strong>Distributed Switch</strong> to ensure consistent networking.</li>
<li>Verified with real-time VM migrations (<strong>Click &ndash;&gt; <a href="https://youtu.be/yb3LMLyPjI0">Video Proof</a></strong>).</li>
</ul>
</li>
</ul>
<h3 id="2-high-availability-ha"><strong>2. High Availability (HA)</strong></h3>
<ul>
<li><strong>Tech Used:</strong> VMware HA Cluster</li>
<li><strong>Purpose:</strong> Automatically restart VMs if an ESXi host fails.</li>
<li><strong>Setup:</strong>
<ul>
<li>Created an <strong>HA Cluster in vCenter</strong>.</li>
<li>Configured <strong>iSCSI Storage + Distributed Switch</strong> to ensure failover.</li>
<li>Simulated host failure (<strong>Click &ndash;&gt; <a href="https://youtu.be/wQGFyiqvU6A">Test Results</a></strong>).</li>
</ul>
</li>
</ul>
<h3 id="3-continuous-availability-ft---fault-tolerance"><strong>3. Continuous Availability (FT - Fault Tolerance)</strong></h3>
<ul>
<li><strong>Tech Used:</strong> VMware FT</li>
<li><strong>Purpose:</strong> <strong>Zero-downtime failover</strong> with a live copy of each VM.</li>
<li><strong>Setup:</strong>
<ul>
<li>Configured <strong>Fault Tolerance on critical VMs</strong>.</li>
<li>Enabled <strong>real-time state synchronization</strong> between ESXi hosts.</li>
<li>Verified <strong>instant VM switchover</strong> during host failure.</li>
</ul>
</li>
</ul>
<h3 id="4-dynamic-resource-scaling-with-drs"><strong>4. Dynamic Resource Scaling with DRS</strong></h3>
<ul>
<li><strong>Tech Used:</strong> VMware Distributed Resource Scheduler (DRS)</li>
<li><strong>Purpose:</strong> Automatically balance VM load across ESXi hosts.</li>
<li><strong>Setup:</strong>
<ul>
<li>Configured <strong>Resource Pools</strong> for different clients.</li>
<li>Enabled <strong>Auto-Migration of VMs</strong> during high CPU/Memory usage.</li>
</ul>
</li>
</ul>
<h3 id="5-role-based-access-for-vm-creators"><strong>5. Role-Based Access for VM Creators</strong></h3>
<ul>
<li><strong>Tech Used:</strong> vCenter RBAC</li>
<li><strong>Purpose:</strong> Restrict VM creation to specific users.</li>
<li><strong>Setup:</strong>
<ul>
<li>Created a <strong>custom role &ldquo;VM Creator&rdquo;</strong>.</li>
<li>Assigned permissions for <strong>only VM creation &amp; modification</strong>.</li>
<li>Tested with limited-access users (<strong>Click &ndash;&gt; <a href="https://youtu.be/SQXMv0oD-zQ">Video Demo</a></strong>).</li>
</ul>
</li>
</ul>
<h3 id="6-hybrid-sso-on-premises--cloud"><strong>6. Hybrid SSO: On-Premises &amp; Cloud</strong></h3>
<ul>
<li><strong>Tech Used:</strong> Active Directory (LDAP) + Azure AD (Intune)</li>
<li><strong>Purpose:</strong> Enable <strong>Single Sign-On (SSO)</strong> across Cloud &amp; On-Premises.</li>
<li><strong>Setup:</strong>
<ul>
<li>Integrated <strong>vCenter with Active Directory (LDAP)</strong> to allow domain users to log in.</li>
<li>Attempted <strong>Azure AD Connect</strong> for linking on-prem AD with Entra ID (Azure AD), but lacked the necessary administrative permissions. The <strong>Entra ID environment was managed by my lecturer</strong>, so I couldnâ€™t complete the full cloud SSO configuration.</li>
<li>Successfully verified <strong>local SSO</strong>, allowing domain users to authenticate in vCenter using their AD credentials.</li>
</ul>
</li>
</ul>
<h3 id="7-mobile-device-management-mdm-with-intune"><strong>7. Mobile Device Management (MDM) with Intune</strong></h3>
<ul>
<li><strong>Tech Used:</strong> Microsoft Intune (Azure AD)</li>
<li><strong>Purpose:</strong> Deploy &amp; manage software across domain-joined devices.</li>
<li><strong>Setup:</strong>
<ul>
<li>Configured <strong>MDM Policy</strong> for Windows clients.</li>
<li><strong>Auto-installed Audacity via Intune</strong> (<strong>Click for <a href="https://youtu.be/XWmNyRJJ7nI">Proof</a></strong>).</li>
<li>Forced domain login on Windows 11 clients (<strong>cloud-ap.be</strong>).</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ip-addressing-plan"><strong>IP Addressing Plan</strong></h2>
<table>
<thead>
<tr>
<th>Device</th>
<th>IP Address</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ESXi Host 1</strong></td>
<td>10.152.3.1</td>
<td>Hypervisor Compute Node</td>
</tr>
<tr>
<td><strong>ESXi Host 2</strong></td>
<td>10.152.3.2</td>
<td>Hypervisor Compute Node</td>
</tr>
<tr>
<td><strong>vCenter (VCSA)</strong></td>
<td>10.152.3.3</td>
<td>Centralized Management</td>
</tr>
<tr>
<td><strong>TrueNAS (NIC1)</strong></td>
<td>10.152.3.4</td>
<td>Shared iSCSI Storage</td>
</tr>
<tr>
<td><strong>TrueNAS (NIC2)</strong></td>
<td>10.152.3.10</td>
<td>Multipath iSCSI Redundancy</td>
</tr>
<tr>
<td><strong>DNS Server</strong></td>
<td>10.152.3.5</td>
<td>AD &amp; DNS Resolution</td>
</tr>
<tr>
<td><strong>Distributed Switch NICs</strong></td>
<td>10.152.3.8 - 10.152.3.9</td>
<td>High-Speed Networking</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="video-demos"><strong>Video Demos</strong></h2>
<p>ðŸ“Œ <a href="https://youtu.be/yb3LMLyPjI0">vMotion Demonstration</a><br>
ðŸ“Œ <a href="https://youtu.be/wQGFyiqvU6A">High Availability in Action</a><br>
ðŸ“Œ <a href="https://youtu.be/SQXMv0oD-zQ">Fault Tolerance Switchover</a><br>
ðŸ“Œ <a href="https://youtu.be/XWmNyRJJ7nI">MDM Auto-Install of Audacity</a></p>
<hr>
<p><img src="/images/cloud_infrastructure_project/image.png" alt="Fault Tolerance">
<strong>Note:</strong> Here we can see that <strong>VMware Fault Tolerance (FT)</strong> is successfully enabled for the virtual machine <strong>VM_ABD</strong>. The <strong>primary VM</strong> is actively running, while the <strong>secondary VM</strong> is synchronized in real-time on a separate ESXi host. This ensures <strong>continuous availability</strong>â€”if the primary host fails, the secondary VM will take over <strong>instantly with zero downtime</strong>.</p>
<p><img src="/images/cloud_infrastructure_project/image-1.png" alt="RDS">
<strong>Note:</strong> Here we can see that <strong>VMware Distributed Resource Scheduler (DRS)</strong> is successfully configured within the <strong>ResourcePool_Abdulla</strong>. This setup ensures <strong>automated resource management</strong>, dynamically balancing CPU and memory workloads across the cluster. The <strong>resource pool structure</strong> allows for <strong>segmentation of computing resources per client or workload</strong>, ensuring guaranteed allocations and optimal performance.</p>
<p><img src="/images/cloud_infrastructure_project/image-2.png" alt="MDM">
<strong>Note:</strong> Here we can see the user successfully authenticated and applied the <strong>MDM configuration policies</strong> via <strong>Microsoft Intune</strong>. The device <strong>U41-83</strong> has been enrolled in <strong>cloud-ap.be</strong>, and both users (<strong>u41user01 &amp; u41user02</strong>) have successfully passed the compliance checks. Additionally, the <strong>default domain for Microsoft Entra Tenant</strong> is correctly set to <strong>cloud-ap.be</strong>, ensuring seamless authentication and policy enforcement.</p>
</div>
    <div class="singleRightBar">
      

    </div>
  </div>
</div>

        <div class="footer">
  <div class="footerLinks">
    <a href="/">AE Blog</a> |
    <a href="/categories">categories</a> |
    <a href="/sitemap.xml">sitemap</a>
  </div>
  <div class="social">
    <a href="https://www.linkedin.com/in/abdullahbagishev" aria-label="LinkedIn">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill="#FFFFFF"
          d="M22.23 0H1.77C0.79 0 0 0.77 0 1.725V22.275C0 23.23 0.79 24 1.77 24H22.23C23.21 24 24 23.23 24 22.275V1.725C24 0.77 23.21 0 22.23 0ZM7.12 20.452H3.56V9H7.12V20.452ZM5.34 7.43C4.14 7.43 3.18 6.47 3.18 5.27C3.18 4.07 4.14 3.11 5.34 3.11C6.54 3.11 7.5 4.07 7.5 5.27C7.5 6.47 6.54 7.43 5.34 7.43ZM20.44 20.452H16.88V14.69C16.88 13.28 16.86 11.53 15 11.53C13.12 11.53 12.84 12.98 12.84 14.6V20.452H9.28V9H12.68V10.65H12.72C13.2 9.79 14.42 8.85 16.14 8.85C19.74 8.85 20.44 11.31 20.44 14.09V20.452Z" />
      </svg>
    </a>
    <a href="https://aegides.be" aria-label="AEGIDES">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="#FFFFFF" stroke-width="2" fill="none" />
        <text x="50%" y="50%" text-anchor="middle" dy=".35em" font-size="8" fill="#FFFFFF">AE</text>
      </svg>
    </a>
  </div>
</div>
    </div>
</body>

</html>